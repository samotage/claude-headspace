{% extends "base.html" %}

{% block title %}Help - Claude Headspace{% endblock %}

{% block content %}
<div class="min-h-screen">
    {% include "partials/_header.html" %}

    <main class="page-content container mx-auto px-4 py-6" role="main">
        <div class="flex gap-6" style="min-height: calc(100vh - 200px);">
            <!-- Sidebar: Search + TOC -->
            <aside class="w-56 flex-shrink-0">
                <div class="sticky top-28">
                    <!-- Search -->
                    <div class="mb-4">
                        <input type="text"
                               id="help-search-input"
                               class="form-well w-full px-3 py-2 text-sm"
                               placeholder="Search docs..."
                               oninput="searchHelp(this.value)"
                               aria-label="Search documentation">
                    </div>

                    <!-- Table of Contents -->
                    <nav id="help-toc" class="space-y-1" aria-label="Help topics">
                        <!-- Topics loaded dynamically -->
                    </nav>
                </div>
            </aside>

            <!-- Main content -->
            <div id="help-content" class="flex-1 min-w-0 pb-12">
                <div class="text-muted text-center py-8">
                    Loading...
                </div>
            </div>
        </div>
    </main>

    {% include "partials/_doc_viewer_modal.html" %}
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/help.js') }}?v={{ cache_bust }}"></script>
<script>
    // Load initial topic from URL hash or default to index
    (function() {
        var slug = '{{ initial_topic }}' || 'index';
        if (window.loadHelpTopic) {
            window.loadHelpTopic(slug);
        }
    })();
</script>
{% endblock %}
