<section class="flex-shrink-0 w-[480px] bg-surface rounded-lg border border-border overflow-hidden flex flex-col"
         data-project-id="{{ project.id }}"
         style="max-height: calc(100vh - 280px);"
         aria-labelledby="project-{{ project.id }}-heading">
    <!-- Column header -->
    <div class="flex items-center justify-between p-4 bg-elevated border-b border-cyan/20"
         style="box-shadow: 0 1px 8px rgba(86,212,221,0.08);">
        <div class="flex items-center gap-3">
            <!-- Traffic lights (macOS style) -->
            <div class="flex items-center gap-1.5">
                <span class="traffic-light w-3 h-3 rounded-full
                    {% if project.traffic_light == 'red' %}bg-red
                    {% elif project.traffic_light == 'yellow' %}bg-amber
                    {% else %}bg-green{% endif %}"
                      role="status" aria-label="Project status"></span>
                <span class="w-3 h-3 rounded-full bg-amber opacity-40"></span>
                <span class="w-3 h-3 rounded-full bg-green opacity-40"></span>
            </div>

            <!-- Project name -->
            <h2 id="project-{{ project.id }}-heading" class="text-primary font-medium font-display">
                {{ project.name }}
            </h2>
        </div>

        <!-- Active agent count (cyan bordered badge) -->
        <span class="px-2 py-0.5 text-xs font-mono rounded border border-cyan/30 text-cyan">
            {{ project.active_count }} active
        </span>
    </div>

    <!-- Waypoint preview (if available) -->
    {% if project.waypoint %}
    <div class="px-4 py-2 border-b border-border bg-deep flex items-center gap-2">
        <span class="text-muted text-sm">&#9654;</span>
        <span class="text-secondary text-sm truncate flex-1">
            Waypoint: {{ project.waypoint }}
        </span>
        <button class="text-cyan text-sm hover:text-primary min-h-[44px] min-w-[44px] flex items-center justify-center"
                onclick="openWaypointEditor({{ project.id }})"
                aria-label="Edit waypoint for {{ project.name }}">
            [Edit]
        </button>
    </div>
    {% endif %}

    <!-- Agent cards (vertically scrollable) -->
    <div class="p-4 overflow-y-auto flex-1">
        <div class="space-y-4">
            {% for agent in project.agents %}
                {% include "partials/_agent_card.html" %}
            {% endfor %}
        </div>
    </div>
</section>
