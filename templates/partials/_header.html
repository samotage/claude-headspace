<header class="bg-deep border-b border-border sticky top-0 z-50" role="banner">
    <div class="container mx-auto px-4">
        <!-- Top bar: Title and Navigation -->
        <div class="flex items-center justify-between py-4">
            <h1 class="text-xl font-bold text-primary">
                <span class="text-cyan">CLAUDE</span> <span class="text-muted">&gt;_</span>headspace
            </h1>

            <nav class="flex gap-4" role="navigation" aria-label="Main navigation">
                <a href="{{ url_for('dashboard.dashboard') }}"
                   class="nav-link px-4 py-2 rounded {% if request.endpoint == 'dashboard.dashboard' %}bg-surface text-primary{% else %}text-secondary hover:text-primary hover:bg-hover{% endif %} transition-colors min-h-[44px] flex items-center"
                   {% if request.endpoint == 'dashboard.dashboard' %}aria-current="page"{% endif %}>
                    dashboard
                </a>
                <a href="{{ url_for('objective.objective_page') }}"
                   class="nav-link px-4 py-2 rounded {% if request.endpoint == 'objective.objective_page' %}bg-surface text-primary{% else %}text-secondary hover:text-primary hover:bg-hover{% endif %} transition-colors min-h-[44px] flex items-center"
                   {% if request.endpoint == 'objective.objective_page' %}aria-current="page"{% endif %}>
                    objective
                </a>
                <a href="{{ url_for('logging.logging_page') }}"
                   class="nav-link px-4 py-2 rounded {% if request.endpoint == 'logging.logging_page' %}bg-surface text-primary{% else %}text-secondary hover:text-primary hover:bg-hover{% endif %} transition-colors min-h-[44px] flex items-center"
                   {% if request.endpoint == 'logging.logging_page' %}aria-current="page"{% endif %}>
                    logging
                </a>
                <a href="{{ url_for('config.config_page') }}"
                   class="nav-link px-4 py-2 rounded {% if request.endpoint == 'config.config_page' %}bg-surface text-primary{% else %}text-secondary hover:text-primary hover:bg-hover{% endif %} transition-colors min-h-[44px] flex items-center"
                   {% if request.endpoint == 'config.config_page' %}aria-current="page"{% endif %}>
                    config
                </a>
                <button type="button"
                        onclick="openHelpModal()"
                        class="nav-link px-4 py-2 rounded text-secondary hover:text-primary hover:bg-hover transition-colors min-h-[44px] flex items-center"
                        aria-label="Open help"
                        title="Help (?)">
                    ?
                </button>
            </nav>
        </div>

        <!-- Status bar -->
        <div class="flex flex-wrap items-center gap-4 pb-4 text-sm">
            <!-- Status badges -->
            <div class="flex items-center gap-4">
                <span id="status-input-needed"
                      class="flex items-center gap-2 px-3 py-1 rounded bg-surface"
                      aria-label="{{ status_counts.input_needed }} agents awaiting input">
                    <span class="w-2 h-2 rounded-full bg-amber" aria-hidden="true"></span>
                    <span class="text-amber font-medium">INPUT NEEDED</span>
                    <span class="status-count text-primary font-bold">[{{ status_counts.input_needed }}]</span>
                </span>

                <span id="status-working"
                      class="flex items-center gap-2 px-3 py-1 rounded bg-surface"
                      aria-label="{{ status_counts.working }} agents working">
                    <span class="w-2 h-2 rounded-full bg-blue" aria-hidden="true"></span>
                    <span class="text-blue font-medium">WORKING</span>
                    <span class="status-count text-primary font-bold">[{{ status_counts.working }}]</span>
                </span>

                <span id="status-idle"
                      class="flex items-center gap-2 px-3 py-1 rounded bg-surface"
                      aria-label="{{ status_counts.idle }} agents idle">
                    <span class="w-2 h-2 rounded-full bg-muted" aria-hidden="true"></span>
                    <span class="text-muted font-medium">IDLE</span>
                    <span class="status-count text-primary font-bold">[{{ status_counts.idle }}]</span>
                </span>
            </div>

            <!-- SSE Connection indicator -->
            <div id="connection-indicator"
                 class="ml-auto flex items-center gap-2"
                 role="status"
                 aria-live="polite">
                <span class="connection-dot w-2 h-2 rounded-full bg-muted" aria-hidden="true"></span>
                <span class="connection-text text-muted">Connecting...</span>
            </div>
        </div>
    </div>
</header>
